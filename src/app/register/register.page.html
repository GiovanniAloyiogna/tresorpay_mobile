<ion-content class="bg-primary-contrast text-primary login-background" fullscreen>
  <div class="relative flex justify-center items-center h-full px-4">
    <div class="w-full lg:w-5/12 text-center flex justify-center items-center">
      <div class="z-50 w-full lg:w-8/12 px-6" style="max-width: 400px">
        <!-- Logo -->
        <div class="w-full flex items-center justify-center mb-6 ">
          <img src="../../assets/logo-tresorpay.png" alt="Logo" class="w-4/5" />
        </div>
        <!-- Titre -->
        <div class="text-xl font-bold mb-2 text-bluetresor">Création Compte</div><br />
        <!-- Formulaire -->
        <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="text-left">
          <input
            id="nom"
            type="text"
            formControlName="nom"
            class="w-full px-4 mb-4 border border-gray-300 rounded-md"
            placeholder="Entrez votre nom"
          />
          <div
            *ngIf="registerForm.get('nom')?.touched && registerForm.get('nom')?.invalid"
            class="text-sm text-red-600 mb-4"
          >
            <p *ngIf="registerForm.get('nom')?.hasError('required')">Nom requis</p>
            <p *ngIf="registerForm.get('nom')?.hasError('nom')">Format invalide</p>
          </div>
          <input
            id="prenom"
            type="text"
            formControlName="prenom"
            class="w-full px-4 mb-4 border border-gray-300 rounded-md"
            placeholder="Entrez votre prenom"
          />
          <div
            *ngIf="registerForm.get('prenom')?.touched && registerForm.get('prenom')?.invalid"
            class="text-sm text-red-600 mb-4"
          >
            <p *ngIf="registerForm.get('prenom')?.hasError('required')">Prenom requis</p>
            <p *ngIf="registerForm.get('prenom')?.hasError('prenom')">Format invalide</p>
          </div>
          <input
            id="phone"
            type="number"
            formControlName="phoneNumber"
            class="w-full px-4 mb-4 border border-gray-300 rounded-md"
            placeholder="Entrez votre numéro de téléphone"
          />
          <div
            *ngIf="registerForm.get('phone')?.touched && registerForm.get('phone')?.invalid"
            class="text-sm text-red-600 mb-4"
          >
            <p *ngIf="registerForm.get('phone')?.hasError('required')">Numéro de téléphone requis</p>
            <p *ngIf="registerForm.get('phone')?.hasError('phone')">Format invalide</p>
          </div>
          <input
            id="email"
            type="text"
            formControlName="email"
            class="w-full px-4 mb-4 border border-gray-300 rounded-md"
            placeholder="Entrez votre email"
          />
          <div
            *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid"
            class="text-sm text-red-600 mb-4"
          >
            <p *ngIf="registerForm.get('email')?.hasError('email')">Format invalide</p>
          </div>
          <input
            id="password"
            type="password"
            formControlName="password"
            (input)="onPasswordInput($event)"
            class="w-full px-4 mb-4 border border-gray-300 rounded-md"
            placeholder="Entrez votre mot de passe"
          />
          <div
            *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid"
            class="text-sm text-red-600 mb-4"
          >
            <p *ngIf="registerForm.get('password')?.hasError('required')">Mot de passe requis</p>
            <p *ngIf="registerForm.get('password')?.hasError('minlength')">Minimum 6 caractères</p>
            <p *ngIf="registerForm.get('password')?.hasError('pattern')">Seuls les chiffres sont autorisés</p>
          </div>
          <input
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            (input)="onConfirmPasswordInput($event)"
            class="w-full px-4 mb-4 border border-gray-300 rounded-md"
            placeholder="Confirmer votre mot de passe"
          />
          <div
            *ngIf="registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.invalid"
            class="text-sm text-red-600 mb-4"
          >
            <p *ngIf="registerForm.get('confirmPassword')?.hasError('required')">Mot de passe requis</p>
            <p *ngIf="registerForm.get('confirmPassword')?.hasError('minlength')">Minimum 6 caractères</p>
            <p *ngIf="registerForm.get('confirmPassword')?.hasError('pattern')">Seuls les chiffres sont autorisés</p>
          </div>
          <!-- Password mismatch error -->
          <div
            *ngIf="registerForm.errors?.['mismatch'] && registerForm.get('confirmPassword')?.touched"
            class="text-sm text-red-600 mb-4"
          >
            <p>Les mots de passe ne correspondent pas</p>
          </div>
          <!-- Bouton connexion -->
           <div class="w-full flex items-center justify-center gap-2 mt-3 content-center">
            <button pButton  label="RETOUR"
                    (click)="goBack()"
                    style="background-color: #a8aaaa; border: none; color: white"
                    class="w-24 p-button-rounded p-button-warning p-button-sm mr-1"
            >
            </button>
            <button pButton type="submit" label="CREER"
                    style="background-color: #214579; border: none; color: white"
                    class="w-24 p-button-rounded p-button-warning p-button-sm mr-1"
                    [disabled]="loading"
            >
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</ion-content>
