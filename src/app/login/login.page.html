<ion-content class="login-background" fullscreen>
  <div class="loading-overlay" *ngIf="loading">
    <div class="spinner-container">
      <img src="../../assets/logo_tresor.png" alt="Logo" class="loading-logo" />
      <ion-spinner name="crescent"></ion-spinner>
    </div>
  </div>

  <div class="col-span-12 md:col-span-6 lg:col-span-3">
    <div
      class="p-4 text-white h-24 rounded-border m-0 bg-center bg-cover bg-no-repeat bg-cyan-400"
      style="background-image: url('/demo/images/dashboard/effect-1.svg')"
    >
      <div class="font-bold w-full mb-2">
        <span>Sales</span>
      </div>
      <div class="text-white text-2xl font-bold w-full flex items-center py-1">
        150 <i class="pi pi-arrow-up ml-2 font-bold"></i>
      </div>
    </div>
  </div>

  <div class="connexion-container" [class.blur]="loading">
    <img
      src="../../assets/logo-tresorpay.png"
      alt="TresorPay Logo"
      class="tresor-pay-logo"
    />

    <h2 class="title">Connexion</h2>

    <form [formGroup]="loginForm" (ngSubmit)="onLogin()">
      <div class="form-container">
        <div class="form-group">
          <ion-label position="stacked" class="label-text">Email</ion-label>
          <ion-input
            type="email"
            placeholder="Entrez votre email"
            formControlName="email"
            class="custom-input"
          >
          </ion-input>

          <div
            *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.invalid"
            class="error-message"
          >
            <p *ngIf="loginForm.get('email')?.hasError('required')">
              Email is required
            </p>
            <p *ngIf="loginForm.get('email')?.hasError('email')">
              Invalid email format
            </p>
          </div>
        </div>

        <div class="form-group">
          <ion-label position="stacked" class="label">Mot de passe</ion-label>
          <ion-input
            type="password"
            placeholder="Entrez votre mot de passe"
            formControlName="password"
            class="custom-input"
          >
          </ion-input>

          <div
            *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.invalid"
            class="error-message"
          >
            <p *ngIf="loginForm.get('password')?.hasError('required')">
              Password is required
            </p>
            <p *ngIf="loginForm.get('password')?.hasError('minlength')">
              Password must be at least 6 characters
            </p>
          </div>
        </div>

        <!-- PrimeNG Button -->

        <p-button
          pButton
          type="submit"
          label="Se connecter"
          class="p-button-rounded p-button-warning p-button-sm"
          [disabled]="loading"
        />
      </div>

      <div class="text connexion-text">
        Vous n'avez pas de compte ?<br />
        <p style="text-align: center; color: #f2d52a">Cr√©er</p>
      </div>

      <ion-spinner *ngIf="loading" name="dots"></ion-spinner>
    </form>
  </div>
</ion-content>
